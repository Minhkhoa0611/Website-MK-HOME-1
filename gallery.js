// Danh sách ảnh theo nhóm
const galleries = {
    "galleryNhadep2T": {
        title: "Thiết Kế Nhà Phố 2 Tầng 2025",
        images: [
            "MauTK/Thiết Kế Nhà Phố 2 Tầng 2025/Thiết Kế Nhà Phố 2 Tầng 2025 1.png",
            "MauTK/Thiết Kế Nhà Phố 2 Tầng 2025/Thiết Kế Nhà Phố 2 Tầng 2025 2.png",
            "MauTK/Thiết Kế Nhà Phố 2 Tầng 2025/Thiết Kế Nhà Phố 2 Tầng 2025 3.png",
            "MauTK/Thiết Kế Nhà Phố 2 Tầng 2025/Thiết Kế Nhà Phố 2 Tầng 2025 4.png",
            "MauTK/Thiết Kế Nhà Phố 2 Tầng 2025/Thiết Kế Nhà Phố 2 Tầng 2025 5.png",
            "MauTK/Thiết Kế Nhà Phố 2 Tầng 2025/Thiết Kế Nhà Phố 2 Tầng 2025 6.png",
            "MauTK/Thiết Kế Nhà Phố 2 Tầng 2025/Thiết Kế Nhà Phố 2 Tầng 2025 7.png"
        ]
    },
    "galleryNhadep": {
        title: "Thiết Kế Nhà Hộp Đẹp Xinh 2025",
        images: [
            "MauTK/Thiết Kế Nhà Hộp Đẹp Xinh 2025/Thiết Kế Nhà Hộp Đẹp Xinh 2025 1.png",
            "MauTK/Thiết Kế Nhà Hộp Đẹp Xinh 2025/Thiết Kế Nhà Hộp Đẹp Xinh 2025 2.png",
            "MauTK/Thiết Kế Nhà Hộp Đẹp Xinh 2025/Thiết Kế Nhà Hộp Đẹp Xinh 2025 3.png",
            "MauTK/Thiết Kế Nhà Hộp Đẹp Xinh 2025/Thiết Kế Nhà Hộp Đẹp Xinh 2025 4.png",
            "MauTK/Thiết Kế Nhà Hộp Đẹp Xinh 2025/Thiết Kế Nhà Hộp Đẹp Xinh 2025 5.png",
            "MauTK/Thiết Kế Nhà Hộp Đẹp Xinh 2025/Thiết Kế Nhà Hộp Đẹp Xinh 2025 6.png",
            "MauTK/Thiết Kế Nhà Hộp Đẹp Xinh 2025/Thiết Kế Nhà Hộp Đẹp Xinh 2025 7.png"
        ]
    },
    "galleryNVS": {
        title: "Thiết Kế NVS Hiện Đại 2025",
        images: [
            "MauTK/Thiết Kế NVS Hiện Đại 2025/Thiết Kế NVS Hiện Đại 2025 1.png",
            "MauTK/Thiết Kế NVS Hiện Đại 2025/Thiết Kế NVS Hiện Đại 2025 2.png",
            "MauTK/Thiết Kế NVS Hiện Đại 2025/Thiết Kế NVS Hiện Đại 2025 3.png",
            "MauTK/Thiết Kế NVS Hiện Đại 2025/Thiết Kế NVS Hiện Đại 2025 4.png",
            "MauTK/Thiết Kế NVS Hiện Đại 2025/Thiết Kế NVS Hiện Đại 2025 5.png"
        ]
    },
    "galleryBep": {
        title: "Thiết Kế Phòng Bếp Sang Trọng 2025",
        images: [
            "MauTK/Thiết Kế Phòng Bếp Sang Trọng 2025/Thiết Kế Phòng Bếp Sang Trọng 2025 1.png",
            "MauTK/Thiết Kế Phòng Bếp Sang Trọng 2025/Thiết Kế Phòng Bếp Sang Trọng 2025 2.png",
            "MauTK/Thiết Kế Phòng Bếp Sang Trọng 2025/Thiết Kế Phòng Bếp Sang Trọng 2025 3.png",
            "MauTK/Thiết Kế Phòng Bếp Sang Trọng 2025/Thiết Kế Phòng Bếp Sang Trọng 2025 4.png",
            "MauTK/Thiết Kế Phòng Bếp Sang Trọng 2025/Thiết Kế Phòng Bếp Sang Trọng 2025 5.png",
            "MauTK/Thiết Kế Phòng Bếp Sang Trọng 2025/Thiết Kế Phòng Bếp Sang Trọng 2025 6.png",
            "MauTK/Thiết Kế Phòng Bếp Sang Trọng 2025/Thiết Kế Phòng Bếp Sang Trọng 2025 7.png"
        ]
    },
    "galleryPhongKhach": {
        title: "Thiết Kế Phòng Khách 2025",
        images: [
            "MauTK/Thiết Kế Phòng Khách 2025/Thiết Kế Phòng Khách 2025 1.png",
            "MauTK/Thiết Kế Phòng Khách 2025/Thiết Kế Phòng Khách 2025 2.png",
            "MauTK/Thiết Kế Phòng Khách 2025/Thiết Kế Phòng Khách 2025 3.png",
            "MauTK/Thiết Kế Phòng Khách 2025/Thiết Kế Phòng Khách 2025 4.png",
            "MauTK/Thiết Kế Phòng Khách 2025/Thiết Kế Phòng Khách 2025 5.png",
            "MauTK/Thiết Kế Phòng Khách 2025/Thiết Kế Phòng Khách 2025 6.png"
        ]
    },
    "galleryCongNha": {
        title: "Thiết Kế Cổng Nhà Đẹp 2025",
        images: [
            "MauTK/Thiết Kế Cổng Nhà Đẹp 2025/Thiết Kế Cổng Nhà Đẹp 2025 1.png",
            "MauTK/Thiết Kế Cổng Nhà Đẹp 2025/Thiết Kế Cổng Nhà Đẹp 2025 2.png",
            "MauTK/Thiết Kế Cổng Nhà Đẹp 2025/Thiết Kế Cổng Nhà Đẹp 2025 3.png",
            "MauTK/Thiết Kế Cổng Nhà Đẹp 2025/Thiết Kế Cổng Nhà Đẹp 2025 4.png",
            "MauTK/Thiết Kế Cổng Nhà Đẹp 2025/Thiết Kế Cổng Nhà Đẹp 2025 5.png"
        ]
    },
    "galleryShopTT": {
        title: "Thiết Kế Shop Thời Trang Đẹp",
        images: [
            "MauTK/Thiết Kế Shop Thời Trang Đẹp/Thiết Kế Shop Thời Trang Đẹp 1.png",
            "MauTK/Thiết Kế Shop Thời Trang Đẹp/Thiết Kế Shop Thời Trang Đẹp 2.png",
            "MauTK/Thiết Kế Shop Thời Trang Đẹp/Thiết Kế Shop Thời Trang Đẹp 3.png",
            "MauTK/Thiết Kế Shop Thời Trang Đẹp/Thiết Kế Shop Thời Trang Đẹp 4.png",
            "MauTK/Thiết Kế Shop Thời Trang Đẹp/Thiết Kế Shop Thời Trang Đẹp 5.png",
            "MauTK/Thiết Kế Shop Thời Trang Đẹp/Thiết Kế Shop Thời Trang Đẹp 6.png",
            "MauTK/Thiết Kế Shop Thời Trang Đẹp/Thiết Kế Shop Thời Trang Đẹp 7.png"
        ]
    },
    "galleryCafe": {
        title: "Thiết Kế Quán Cafe Sang Trọng",
        images: [
            "MauTK/Thiết Kế Quán Cafe Sang Trọng/Thiết Kế Quán Cafe Sang Trọng 1.png",
            "MauTK/Thiết Kế Quán Cafe Sang Trọng/Thiết Kế Quán Cafe Sang Trọng 2.png",
            "MauTK/Thiết Kế Quán Cafe Sang Trọng/Thiết Kế Quán Cafe Sang Trọng 3.png",
            "MauTK/Thiết Kế Quán Cafe Sang Trọng/Thiết Kế Quán Cafe Sang Trọng 4.png",
            "MauTK/Thiết Kế Quán Cafe Sang Trọng/Thiết Kế Quán Cafe Sang Trọng 5.png",
            "MauTK/Thiết Kế Quán Cafe Sang Trọng/Thiết Kế Quán Cafe Sang Trọng 6.png",
            "MauTK/Thiết Kế Quán Cafe Sang Trọng/Thiết Kế Quán Cafe Sang Trọng 7.png",
            "MauTK/Thiết Kế Quán Cafe Sang Trọng/Thiết Kế Quán Cafe Sang Trọng 8.png"
        ]
    }
};

// Hàm tạo gallery tự động
const createGallery = (containerId, titleText, images) => {
    // Tạo container nếu chưa tồn tại
    let gallery = document.getElementById(containerId);
    if (!gallery) {
        gallery = document.createElement("div");
        gallery.id = containerId;
        gallery.style.margin = "50px auto";
        gallery.style.maxWidth = "1200px";
        gallery.style.padding = "20px";
        gallery.style.border = "1px solid #ddd";
        gallery.style.borderRadius = "10px";
        gallery.style.boxShadow = "0 4px 8px rgba(0, 0, 0, 0.1)";
        gallery.style.backgroundColor = "#fff";
        document.body.appendChild(gallery); // Thêm vào cuối body
    }

    // Tạo phần section cho gallery
    const section = document.createElement("div");
    section.style.width = "100%";
    section.style.textAlign = "center";
    section.style.marginBottom = "30px";

    // Tạo container cho ảnh và tiêu đề
    const imageContainer = document.createElement("div");
    imageContainer.style.position = "relative"; // Đặt vị trí tương đối để chứa tiêu đề
    imageContainer.style.display = "inline-block";
    imageContainer.style.width = "250px"; // Tăng kích thước container
    imageContainer.style.height = "250px"; // Tăng kích thước container

    // Tạo ảnh mẫu
    const sampleImage = document.createElement("img");
    sampleImage.src = images[0];
    sampleImage.alt = "Sample Image";
    sampleImage.style.width = "100%"; // Đặt ảnh chiếm toàn bộ container
    sampleImage.style.height = "100%"; // Đặt ảnh chiếm toàn bộ container
    sampleImage.style.borderRadius = "10px";
    sampleImage.style.objectFit = "cover"; // Đảm bảo ảnh không bị méo
    sampleImage.style.cursor = "pointer";
    sampleImage.style.transition = "transform 0.3s ease, box-shadow 0.3s ease";
    sampleImage.style.boxShadow = "0 2px 4px rgba(0, 0, 0, 0.1)";
    imageContainer.appendChild(sampleImage);

    // Tạo tiêu đề trên ảnh, nằm phía dưới
    const sampleImageTitle = document.createElement("p");
    sampleImageTitle.innerText = titleText;
    sampleImageTitle.style.position = "absolute"; // Đặt tiêu đề trên ảnh
    sampleImageTitle.style.bottom = "0"; // Căn sát dưới ảnh
    sampleImageTitle.style.left = "0"; // Căn sát trái
    sampleImageTitle.style.width = "100%"; // Chiếm toàn bộ chiều ngang ảnh
    sampleImageTitle.style.fontSize = "16px"; // Kích thước chữ
    sampleImageTitle.style.fontWeight = "bold"; // In đậm chữ
    sampleImageTitle.style.color = "#fff"; // Màu chữ trắng
    sampleImageTitle.style.backgroundColor = "rgba(0, 0, 0, 0.6)"; // Nền mờ cho chữ
    sampleImageTitle.style.padding = "10px 0"; // Thêm khoảng cách bên trong
    sampleImageTitle.style.textAlign = "center"; // Căn giữa chữ
    sampleImageTitle.style.borderBottomLeftRadius = "10px"; // Bo góc dưới trái
    sampleImageTitle.style.borderBottomRightRadius = "10px"; // Bo góc dưới phải
    imageContainer.appendChild(sampleImageTitle);

    section.appendChild(imageContainer);

    // Hiệu ứng hover cho ảnh mẫu
    sampleImage.addEventListener("mouseover", () => {
        sampleImage.style.transform = "scale(1.1)";
        sampleImage.style.boxShadow = "0 4px 8px rgba(0, 0, 0, 0.2)";
    });
    sampleImage.addEventListener("mouseout", () => {
        sampleImage.style.transform = "scale(1)";
        sampleImage.style.boxShadow = "0 2px 4px rgba(0, 0, 0, 0.1)";
    });

    // Tạo popup khi nhấn vào ảnh mẫu
    sampleImage.addEventListener("click", () => {
        const popup = document.createElement("div");
        popup.style.position = "fixed";
        popup.style.top = "0";
        popup.style.left = "0";
        popup.style.width = "100%";
        popup.style.height = "100%";
        popup.style.backgroundColor = "rgba(0, 0, 0, 0.8)";
        popup.style.display = "flex";
        popup.style.flexDirection = "column";
        popup.style.alignItems = "center";
        popup.style.justifyContent = "center";
        popup.style.zIndex = "1000";

        // Tạo tiêu đề cho popup
        const popupTitle = document.createElement("h2");
        popupTitle.innerText = titleText;
        popupTitle.style.color = "#fff";
        popupTitle.style.marginBottom = "20px";
        popupTitle.style.textShadow = "1px 1px 2px rgba(0, 0, 0, 0.5)";
        popupTitle.style.fontSize = "24px";
        popupTitle.style.fontWeight = "bold";
        popupTitle.style.textAlign = "center";
        popup.appendChild(popupTitle);

        // Tạo container cho ảnh trong popup
        const popupGallery = document.createElement("div");
        popupGallery.style.display = "flex";
        popupGallery.style.flexWrap = "wrap";
        popupGallery.style.justifyContent = "center";
        popupGallery.style.gap = "15px";
        popupGallery.style.padding = "20px";
        popupGallery.style.backgroundColor = "#fff";
        popupGallery.style.borderRadius = "10px";
        popupGallery.style.boxShadow = "0 4px 8px rgba(0, 0, 0, 0.2)";
        popupGallery.style.maxWidth = "90%";
        popupGallery.style.maxHeight = "80%";
        popupGallery.style.overflowY = "auto";

        // Thêm ảnh vào popup với lazy loading
        images.forEach(name => {
            const imageWrapper = document.createElement("div");
            imageWrapper.style.display = "flex";
            imageWrapper.style.flexDirection = "column";
            imageWrapper.style.alignItems = "center";
            imageWrapper.style.marginBottom = "15px";

            const img = document.createElement("img");
            img.dataset.src = name; // Sử dụng `data-src` cho lazy loading
            img.alt = name;
            img.style.width = "200px"; // Tăng kích thước ảnh trong popup
            img.style.height = "200px"; // Tăng kích thước ảnh trong popup
            img.style.borderRadius = "10px";
            img.style.objectFit = "cover"; // Đảm bảo ảnh không bị méo
            img.style.boxShadow = "0 2px 4px rgba(0, 0, 0, 0.1)";
            img.classList.add("lazy"); // Thêm class để xử lý lazy loading
            imageWrapper.appendChild(img);

            popupGallery.appendChild(imageWrapper);
        });

        popup.appendChild(popupGallery);

        // Đóng popup khi nhấn vào nền
        popup.addEventListener("click", () => {
            document.body.removeChild(popup);
        });

        document.body.appendChild(popup);

        // Kích hoạt lazy loading khi popup được mở
        const lazyImages = document.querySelectorAll(".lazy");
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src; // Gán `src` từ `data-src`
                    img.classList.remove("lazy");
                    observer.unobserve(img);
                }
            });
        });

        lazyImages.forEach(img => observer.observe(img));
    });

    gallery.appendChild(section);
};

// Tự động tạo gallery cho tất cả phần tử trong danh sách
document.addEventListener("DOMContentLoaded", () => {
    // Tạo tiêu đề chính bên ngoài container
    const titleContainer = document.createElement("div");
    titleContainer.style.margin = "20px auto";
    titleContainer.style.textAlign = "center";
    titleContainer.style.fontSize = "28px"; // Kích thước chữ vừa phải
    titleContainer.style.fontWeight = "bold"; // In đậm chữ
    titleContainer.style.fontFamily = "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"; // Font chữ hiện đại
    titleContainer.style.color = "#333"; // Màu chữ trung tính
    titleContainer.innerText = "TỔNG HỢP MẪU THIẾT KẾ";

    // Thêm tiêu đề vào body
    document.body.appendChild(titleContainer);

    // Tạo container chính cho tất cả gallery
    const mainGalleryContainer = document.createElement("div");
    mainGalleryContainer.style.margin = "30px auto";
    mainGalleryContainer.style.maxWidth = "1200px";
    mainGalleryContainer.style.padding = "20px";
    mainGalleryContainer.style.borderRadius = "10px";
    mainGalleryContainer.style.backgroundColor = "#fff";

    // Tạo gallery cho từng nhóm và thêm vào container chính
    mainGalleryContainer.style.display = "flex";
    mainGalleryContainer.style.flexWrap = "wrap";
    mainGalleryContainer.style.gap = "20px";
    mainGalleryContainer.style.justifyContent = "center";

    Object.keys(galleries).forEach(id => {
        const { title, images } = galleries[id];
        createGallery(id, title, images);
        const gallerySection = document.getElementById(id);

        // Điều chỉnh kích thước và khoảng cách giữa các gallery
        gallerySection.style.flex = "1 1 calc(25% - 20px)"; // Mỗi gallery chiếm 25% chiều rộng, trừ khoảng cách
        gallerySection.style.boxSizing = "border-box";
        gallerySection.style.margin = "0";
        gallerySection.style.padding = "10px";
        gallerySection.style.border = "1px solid #eee";
        gallerySection.style.borderRadius = "8px";
        gallerySection.style.backgroundColor = "#f9f9f9";

        mainGalleryContainer.appendChild(gallerySection);
    });

    // Thêm container chính vào body
    document.body.appendChild(mainGalleryContainer);
});
